<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST NOTIFIKAC√ç</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="IMG_8429.png">

    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #eee; }
        #testBtn { padding: 20px; font-size: 20px; background: green; color: white; border: none; border-radius: 10px; cursor: pointer; }
        .status { margin-top: 20px; padding: 10px; border: 1px solid #ccc; background: #fff; }
    </style>
</head>
<body>

    <h1>üö® Test Notifikac√≠ v2.0</h1>
    <p>Ujisti se, ≈æe jsi tuto str√°nku p≈ôidal <b>NA PLOCHU</b>.</p>
    
    <button id="testBtn">AKTIVOVAT PUSH</button>

    <div class="status" id="stat">ƒåek√°m na naƒçten√≠ syst√©mu...</div>

    <script>
    // 1. SDK Webpushru
    (function(w,d, s, id) {
        if(typeof(w.webpushr)!=='undefined') return;
        w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};
        var js, fjs = d.getElementsByTagName(s)[0];
        js = d.createElement(s); js.id = id;js.async=1;
        js.src = "https://cdn.webpushr.com/app.min.js";
        fjs.parentNode.appendChild(js);
    }(window,document, 'script', 'webpushr-jssdk-alternative'));

    // 2. Inicializace - pou≈æijeme relativn√≠ cestu, kter√° vƒçera fungovala
    webpushr('init','BHnXQvMsyuIkh4upI3mpTYS-qF0EyFi-bkJXZZm9wobAMzWJzyAbx9iQHFIOlVrvj3lz7PtjxdL5vgZc6lz431c','webpushr-sw.js','/SazkovkaNadeje/');

    // 3. Status po naƒçten√≠
    window.onload = function() {
        setTimeout(function() {
            if(typeof webpushr !== 'undefined') {
                webpushr('notification_status', function(status) {
                    document.getElementById('stat').innerText = "Aktu√°ln√≠ stav: " + status;
                });
            } else {
                document.getElementById('stat').innerText = "Chyba: Webpushr SDK se nenaƒçetlo!";
            }
        }, 3000);
    };

    // 4. Samotn√° aktivace na kliknut√≠
    document.getElementById('testBtn').onclick = function() {
        document.getElementById('stat').innerText = "Zkou≈°√≠m se p≈ôihl√°sit...";
        
        webpushr('fetch_subscription', function(result) {
            console.log(result);
            if(result.status === 'success') {
                document.getElementById('stat').innerText = "‚úÖ √öSPƒöCH! Odbƒõr aktivov√°n.";
                alert("Povedlo se! Teƒè zkus poslat test z Webpushr Dashboardu.");
            } else {
                document.getElementById('stat').innerText = "‚ùå CHYBA: " + result.description;
                alert("Selhalo to: " + result.description);
            }
        });
    };
    </script>
</body>
</html>
